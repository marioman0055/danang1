import React, { useState } from 'react';
import { Plane, Hotel, Calendar, CheckSquare, Wallet, MapPin, ChevronDown, ChevronUp, Sun, Moon, Coffee, ShoppingBag, Camera, Music, Anchor, ExternalLink, Utensils, Car } from 'lucide-react';

const DanangTripDashboard = () => {
  const [activeTab, setActiveTab] = useState('schedule');
  const [expandedDay, setExpandedDay] = useState(1); // Default to Day 1 open
  const [checkedItems, setCheckedItems] = useState({});

  const toggleDay = (day) => {
    if (expandedDay === day) {
      setExpandedDay(null);
    } else {
      setExpandedDay(day);
    }
  };

  const toggleCheck = (id) => {
    setCheckedItems(prev => ({
      ...prev,
      [id]: !prev[id]
    }));
  };

  const openMap = (query) => {
    if (!query) return;
    window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(query)}`, '_blank');
  };

  const flights = [
    { type: 'ì¶œêµ­', date: '12.31(ìˆ˜)', flight: 'WE201', time: '18:45 ICN â†’ 21:55 DAD', note: 'íŒŒë¼íƒ€í•­ê³µ' },
    { type: 'ê·€êµ­', date: '01.05(ì›”)', flight: 'WE202', time: '22:55 DAD â†’ 05:30+1 ICN', note: '1/6 ì•„ì¹¨ ë„ì°©' }
  ];

  const hotels = [
    { name: 'ìœ™í¬ í˜¸í…” ë‹¤ë‚­ ë¦¬ë²„ì‚¬ì´ë“œ', period: '12.31 ~ 01.02 (2ë°•)', note: '24ì‹œê°„ ìŠ¤í…Œì´ ì ìš©', type: 'ì‹œë‚´', mapQuery: 'Wink Hotel Danang Riverside' },
    { name: 'ë…¸ë³´í…” ë‹¤ë‚­ í”„ë¦¬ë¯¸ì–´', period: '01.02 ~ 01.05 (3ë°•)', note: '1 Bedroom Apt (ê±°ì‹¤ ì—‘ë² )', type: 'í˜¸ìº‰ìŠ¤', mapQuery: 'Novotel Danang Premier Han River' }
  ];

  const scheduleData = [
    {
      day: 1,
      date: '12.31 (ìˆ˜)',
      title: 'ì„¤ë ˆëŠ” ë„ì°© & ì¹´ìš´íŠ¸ë‹¤ìš´ ğŸ‰',
      activities: [
        { 
          time: '18:45', 
          title: 'ì¸ì²œê³µí•­ ì¶œë°œ', 
          desc: 'WE201í¸ íƒ‘ìŠ¹', 
          icon: <Plane size={16} />,
          details: []
        },
        { 
          time: '21:55', 
          title: 'ë‹¤ë‚­ ê³µí•­ ë„ì°©', 
          desc: 'ì§ ì°¾ê³  í´ë£© ê¸°ì‚¬ë‹˜ ë¯¸íŒ…', 
          icon: <MapPin size={16} />, 
          mapQuery: 'Da Nang International Airport',
          details: []
        },
        { 
          time: '22:45', 
          title: 'í˜¸í…” ì´ë™ (í´ë£© í”½ì—…)', 
          desc: 'ìœ™í¬ í˜¸í…”ë¡œ ì´ë™', 
          icon: <Car size={16} />,
          details: [{ label: 'Move', text: 'í”½ì—… ì°¨ëŸ‰ íƒ‘ìŠ¹' }]
        },
        { 
          time: '23:15', 
          title: 'ìœ™í¬ í˜¸í…” ì²´í¬ì¸', 
          desc: '24ì‹œê°„ ìŠ¤í…Œì´ í™•ì¸ í•„ìˆ˜', 
          icon: <Hotel size={16} />, 
          mapQuery: 'Wink Hotel Danang Riverside',
          details: []
        },
        { 
          time: '24:00', 
          title: 'HAPPY NEW YEAR! âœ¨', 
          desc: 'ìƒˆí•´ ë§ì´ ë¶ˆê½ƒë†€ì´ & ì•¼ì‹', 
          icon: <Moon size={16} />, 
          details: [{ label: 'Note', text: 'ë£¨í”„íƒ‘ ë˜ëŠ” ê°ì‹¤ ê´€ëŒ & ë°°ë‹¬Kë¡œ ì•¼ì‹ ì£¼ë¬¸' }]
        },
      ]
    },
    {
      day: 2,
      date: '01.01 (ëª©)',
      title: 'ë¯¸ì¹´ì¦ˆí‚¤ ì˜¨ì²œ & ì˜í¥ì‚¬ íë§ âœ¨',
      activities: [
        { 
          time: '09:30', 
          title: 'ë¯¸ì¹´ì¦ˆí‚¤ ë¦¬ì¡°íŠ¸ ì´ë™', 
          desc: 'ê·¸ë© íƒ‘ìŠ¹', 
          icon: <Car size={16} />, 
          details: [{ label: 'Move', text: 'ì‹œë‚´ì—ì„œ ì•½ 20~30ë¶„ ì†Œìš”' }]
        },
        { 
          time: '10:00', 
          title: 'ë¯¸ì¹´ì¦ˆí‚¤ ì˜¨ì²œ & ì›Œí„°íŒŒí¬', 
          desc: 'ì‹¤ë‚´ ì›Œí„°íŒŒí¬ ë¬¼ë†€ì´', 
          icon: <Sun size={16} />, 
          mapQuery: 'Da Nang Mikazuki Japanese Resorts & Spa',
          details: [{ label: 'Vibe', text: 'ë‚ ì”¨ ì˜í–¥ ì—†ì´ ì‹ ë‚˜ëŠ” ë¬¼ë†€ì´ ê°€ëŠ¥' }]
        },
        { 
          time: '12:30', 
          title: 'ì ì‹¬ ì‹ì‚¬', 
          desc: 'ë¦¬ì¡°íŠ¸ ë‚´ í‘¸ë“œì½”íŠ¸/ë ˆìŠ¤í† ë‘', 
          icon: <Utensils size={16} />,
          details: []
        },
        { 
          time: '14:30', 
          title: 'ì˜í¥ì‚¬(ë§ì—„ì‚¬) ì´ë™', 
          desc: 'ê·¸ë© ì´ë™ (ë¶ì„œâ†’ë¶ë™)', 
          icon: <Car size={16} />, 
          details: [{ label: 'Move', text: 'ì•½ 30~40ë¶„ ì†Œìš” (ê±°ë¦¬ê°€ ì¢€ ìˆìŒ)' }]
        },
        { 
          time: '15:30', 
          title: 'ì˜í¥ì‚¬(ë§ì—„ì‚¬) ê´€ëŒ', 
          desc: 'í•´ìˆ˜ê´€ìŒìƒ & ì „ë§ ê°ìƒ', 
          icon: <Camera size={16} />, 
          mapQuery: 'Linh Ung Pagoda',
          details: [{ label: 'Note', text: 'ê²½ì‚¬ê°€ ìˆìœ¼ë‹ˆ í¸í•œ ì‹ ë°œ ì¶”ì²œ' }]
        },
        { 
          time: '17:00', 
          title: 'ì €ë…: ëª© ì‹ë‹¹ (Moc Seafood)', 
          desc: 'í•´ì‚°ë¬¼ ë§›ì§‘', 
          icon: <Utensils size={16} />, 
          mapQuery: 'Moc Seafood Danang',
          details: [{ label: 'Move', text: 'ì•½ 15~20ë¶„ ì†Œìš”' }]
        },
        { 
          time: '18:30', 
          title: 'ì†íŠ¸ë¼ ì•¼ì‹œì¥ & ìš©ë‹¤ë¦¬', 
          desc: 'ì•¼ê²½ ì‚°ì±…', 
          icon: <ShoppingBag size={16} />, 
          mapQuery: 'Son Tra Night Market',
          details: [{ label: 'Move', text: 'ì‹ë‹¹ì—ì„œ ë§¤ìš° ê°€ê¹Œì›€ (ê¸°ë³¸ìš”ê¸ˆ)' }]
        },
        { 
          time: '19:30', 
          title: 'í˜¸í…” ë³µê·€', 
          desc: 'íœ´ì‹', 
          icon: <Hotel size={16} />, 
          details: []
        }
      ]
    },
    {
      day: 3,
      date: '01.02 (ê¸ˆ)',
      title: 'ë°”ë‚˜í ì™„ì „ ì •ë³µ & ë‹¤ë¦¬ íë§ ğŸ°',
      activities: [
        { 
          time: '09:30', 
          title: 'ìœ™í¬ í˜¸í…” ì²´í¬ì•„ì›ƒ', 
          desc: '', 
          icon: <Hotel size={16} />,
          details: []
        },
        { 
          time: '09:40', 
          title: 'ë°”ë‚˜í ì¶œë°œ', 
          desc: 'ì•¼ë†€ì ì°¨ëŸ‰ íƒ‘ìŠ¹', 
          icon: <Car size={16} />, 
          details: [{ label: 'Note', text: 'ì§ì€ ì°¨ëŸ‰ íŠ¸ë í¬ì— ë³´ê´€' }]
        },
        { 
          time: '10:30', 
          title: 'ë°”ë‚˜í ë„ì°© & ê³¨ë“  ë¸Œë¦¿ì§€', 
          desc: 'ì¼€ì´ë¸”ì¹´ & í”Œë¼ì›Œ ê°€ë“ ', 
          icon: <Anchor size={16} />, 
          mapQuery: 'Golden Bridge Ba Na Hills',
          details: [
            { label: 'Ticket', text: 'ì¢…í•© ì´ìš©ê¶Œì— ì¼€ì´ë¸”ì¹´+ë†€ì´ì‹œì„¤ í¬í•¨' },
            { label: 'Note', text: 'ë°€ëì¸í˜• ë°•ë¬¼ê´€/ìœ ë£Œ ê²Œì„ ì œì™¸' }
          ]
        },
        { 
          time: '12:00', 
          title: 'ì ì‹¬: ë°”ë‚˜í ë§›ì§‘', 
          desc: 'ë·”í˜ ë˜ëŠ” ë‹¨í’ˆ ì„ íƒ', 
          icon: <Utensils size={16} />, 
          mapQuery: 'Ba Na Hills Restaurants',
          details: [
            { label: 'Option A', text: 'ì•„ë¼íŒ¡/ë¹„ì–´í”Œë¼ì (ë·”í˜/í•œì‹í¬í•¨)' },
            { label: 'Option B', text: 'ë¸Œë¼ì„¸ë¦¬ (ì´íƒˆë¦¬ì•ˆ/í”¼ì)' },
            { label: 'Option C', text: 'ìº…ì¹´ìŠ¤ (ì–‘ê³ ê¸° BBQ ê¼¬ì¹˜)' }
          ]
        },
        { 
          time: '13:00', 
          title: 'ë°€ëì¸í˜• ë°•ë¬¼ê´€ (Wax Museum)', 
          desc: 'ìœ ëª… ì¸ì‚¬ì™€ ì‚¬ì§„ ì°ê¸°', 
          icon: <Camera size={16} />, 
          details: [
            { label: 'Ticket', text: 'ë³„ë„ êµ¬ë§¤ í•„ìš” (ì•½ 10ë§Œë™/ì¸)' },
            { label: 'Photo', text: 'ì•„ì´ì™€ ì‹¤ë¬¼ í¬ê¸° ì¸í˜• ì¸ì¦ìƒ·' }
          ]
        },
        { 
          time: '13:40', 
          title: 'íŒíƒ€ì§€ íŒŒí¬: ë£¨ì§€ & ë²”í¼ì¹´', 
          desc: 'ë†€ì´ì‹œì„¤ ì¦ê¸°ê¸°', 
          icon: <Sun size={16} />, 
          details: [
            { label: 'Strategy', text: 'ë¬´ì¡°ê±´ ë£¨ì§€(ì•ŒíŒŒì¸ ì½”ìŠ¤í„°) ë¨¼ì € íƒ‘ìŠ¹! (ë¹„ì˜¤ë©´ ì¤‘ë‹¨)' },
            { label: 'Next', text: 'ì´í›„ ì‹¤ë‚´ ë²”í¼ì¹´ ë“± ì´ìš©' }
          ]
        },
        { 
          time: '15:30', 
          title: 'ìŠ¤íƒ€ë²…ìŠ¤ ë°”ë‚˜íì ', 
          desc: 'ì»¤í”¼ í•œì”ì˜ ì—¬ìœ ', 
          icon: <Coffee size={16} />, 
          mapQuery: 'Starbucks Ba Na Hills',
          details: [
            { label: 'Shopping', text: 'ë² íŠ¸ë‚¨/ë‹¤ë‚­ ì‹œí‹° ë°ë¯¸ë¨¸ê·¸ ì„¸íŠ¸' },
            { label: 'Drink', text: 'ì•„ì‹œì•„ ëŒì²´ ë¼ë–¼ (ë‹¹ ì¶©ì „!)' }
          ]
        },
        { 
          time: '16:30', 
          title: 'í•˜ì‚° & ë…¸ë³´í…” ì´ë™', 
          desc: 'ì•¼ë†€ì ì°¨ëŸ‰ íƒ‘ìŠ¹', 
          icon: <Car size={16} />, 
          details: []
        },
        { 
          time: '17:30', 
          title: 'ë…¸ë³´í…” ì²´í¬ì¸', 
          desc: '1 Bedroom Apt', 
          icon: <Hotel size={16} />, 
          mapQuery: 'Novotel Danang Premier Han River',
          details: []
        },
        { 
          time: '18:00', 
          title: 'ì €ë…: ë§ˆë‹´ë€ (Madame Lan)', 
          desc: 'ë°˜ì„¸ì˜¤ ë§›ì§‘', 
          icon: <Utensils size={16} />, 
          mapQuery: 'Madame Lan Restaurant',
          details: [{ label: 'Move', text: 'í˜¸í…”ì—ì„œ ë„ë³´ 5ë¶„' }]
        },
        { 
          time: '19:30', 
          title: 'ê³¨ë“  ë¡œí„°ìŠ¤ ìŠ¤íŒŒ', 
          desc: 'ë°œë§ˆì‚¬ì§€ 60ë¶„', 
          icon: <Moon size={16} />, 
          mapQuery: 'Golden Lotus Spa Danang',
          details: [
            { label: 'Move', text: 'ì‹ë‹¹ì—ì„œ ë„ë³´ 10ë¶„/ê·¸ë© ê¸°ë³¸' },
            { label: 'Tip', text: 'ì‹ì‚¬ í›„ ì†Œí™”ì‹œí‚¤ë©° ì´ë™ ì¶”ì²œ' }
          ]
        }
      ]
    },
    {
      day: 4,
      date: '01.03 (í† )',
      title: 'í˜¸ì´ì•ˆ ì•ˆë°© ë¹„ì¹˜ & ëœí„´ ğŸ®',
      activities: [
        { 
          time: '09:30', 
          title: 'ì•ˆë°© ë¹„ì¹˜ë¡œ ì´ë™', 
          desc: 'í´ë£© ì°¨ëŸ‰ (í¸ë„ ë ŒíŠ¸)', 
          icon: <Car size={16} />, 
          details: [{ label: 'Move', text: 'ì•½ 40~50ë¶„ ì†Œìš”' }]
        },
        { 
          time: '10:10', 
          title: 'ì¹´í˜: ë” ë± í•˜ìš°ìŠ¤', 
          desc: 'ì˜¤ì…˜ë·° ì¹´í˜', 
          icon: <Coffee size={16} />, 
          mapQuery: 'The Deck House An Bang Beach',
          details: [{ label: 'Move', text: 'ì£¼ì°¨ì¥ì—ì„œ í•´ë³€ ìª½ìœ¼ë¡œ ë„ë³´' }]
        },
        { 
          time: '12:00', 
          title: 'ì ì‹¬: ë¼í”Œë¼ì£¼ (La Plage)', 
          desc: 'í•´ì‚°ë¬¼ ë§›ì§‘', 
          icon: <Utensils size={16} />, 
          mapQuery: 'La Plage Hoi An',
          details: [{ label: 'Menu', text: 'ê°€ë¦¬ë¹„ êµ¬ì´, ì´ì•Œ ì˜¤ì§•ì–´, í•´ì‚°ë¬¼ ë³¶ìŒë°¥' }]
        },
        { 
          time: '13:30', 
          title: 'í˜¸ì´ì•ˆ ì˜¬ë“œíƒ€ìš´ ì´ë™', 
          desc: 'ê·¸ë© ì´ìš©', 
          icon: <Car size={16} />, 
          mapQuery: 'Hoi An Ancient Town',
          details: [{ label: 'Move', text: 'ì•½ 10~15ë¶„ ì†Œìš”' }]
        },
        { 
          time: '14:00', 
          title: 'ì”¨í´ë¡œ(Cyclo) íˆ¬ì–´', 
          desc: 'ì¸ë ¥ê±° íƒ€ê³  êµ¬ê²½', 
          icon: <Sun size={16} />, 
          details: [{ label: 'Tip', text: 'ë”ìš´ ë‚® ì‹œê°„ì— í¸í•˜ê²Œ ê´€ëŒ' }]
        },
        { 
          time: '15:00', 
          title: 'íŒŒì´í¬ ì»¤í”¼ (Faifo Coffee)', 
          desc: 'ë£¨í”„íƒ‘ í¬í† ì¡´', 
          icon: <Coffee size={16} />, 
          mapQuery: 'Faifo Coffee',
          details: []
        },
        { 
          time: '16:30', 
          title: 'ëœí„´ ë§Œë“¤ê¸° ì²´í—˜', 
          desc: 'The Lantern Lady', 
          icon: <Sun size={16} />, 
          mapQuery: 'The Lantern Lady Hoi An',
          details: [{ label: 'Note', text: '16:30 ì˜ˆì•½ ì‹œê°„ ì¤€ìˆ˜' }]
        },
        { 
          time: '18:00', 
          title: 'í˜¸ì´ì•ˆ ì•¼ì‹œì¥ íƒë°©', 
          desc: 'ì €ë… ì‹ì‚¬ ë° êµ¬ê²½', 
          icon: <ShoppingBag size={16} />, 
          mapQuery: 'Hoi An Night Market',
          details: [{ label: 'Move', text: 'íˆ¬ë³¸ê°• ë‹¤ë¦¬ ê±´ë„ˆ ì´ë™' }]
        },
        { 
          time: '19:00', 
          title: 'íˆ¬ë³¸ê°• ì†Œì›ë°° íƒ€ê¸°', 
          desc: 'ì†Œì›ì´ˆ ë„ìš°ê¸°', 
          icon: <Anchor size={16} />, 
          details: []
        },
        { 
          time: '20:00', 
          title: '[íˆ¬ì–´íŒ¨ìŠ¤ 1] ë§ˆì‚¬ì§€', 
          desc: 'ì•„íŠ¸ ìŠ¤íŒŒ or ì„¸ë ˆë„¤ ìŠ¤íŒŒ', 
          icon: <Moon size={16} />, 
          mapQuery: 'Art Spa Hoi An',
          details: [{ label: 'Move', text: 'ì•¼ì‹œì¥ ê·¼ì²˜ ë„ë³´/ê·¸ë©' }]
        },
        { 
          time: '21:30', 
          title: 'í˜¸í…” ë³µê·€', 
          desc: 'í´ë£© ì°¨ëŸ‰ í”½ì—…', 
          icon: <Car size={16} />, 
          details: [{ label: 'Move', text: 'ìŠ¤íŒŒ ì•ì—ì„œ ë°”ë¡œ íƒ‘ìŠ¹ (40ë¶„ ì†Œìš”)' }]
        }
      ]
    },
    {
      day: 5,
      date: '01.04 (ì¼)',
      title: 'ì‡¼í•‘ & íë§ ì¼€ì–´ & ë¶ˆì‡¼ ğŸš¢',
      activities: [
        { 
          time: '09:00', 
          title: 'ì˜¤í–‰ì‚° (ë§ˆë¸” ë§ˆìš´í‹´)', 
          desc: 'ë™êµ´ê³¼ ì‚¬ì› íƒë°©', 
          icon: <Sun size={16} />, 
          mapQuery: 'The Marble Mountains',
          details: [{ label: 'Move', text: 'ê·¸ë© ì´ë™ ì•½ 15~20ë¶„' }]
        },
        { 
          time: '12:00', 
          title: 'ì ì‹¬: ì”€ëª¨ì´ê°€ë“ ', 
          desc: 'ë² íŠ¸ë‚¨ ê°€ì •ì‹', 
          icon: <Utensils size={16} />, 
          mapQuery: 'Nha Hang Xeo Moi Garden',
          details: [{ label: 'Move', text: 'ì˜¤í–‰ì‚°ì—ì„œ ì‹œë‚´ë¡œ ì´ë™ (20ë¶„)' }]
        },
        { 
          time: '14:00', 
          title: 'ì›ë°ì´ í´ë˜ìŠ¤ (ê³µë°©)', 
          desc: 'ë„ìê¸° ë˜ëŠ” ìº”ë“¤', 
          icon: <Sun size={16} />, 
          mapQuery: 'Gom An Nhien',
          details: [
            { label: 'Option', text: '1. Gá»‘m An NhiÃªn (ë„ìê¸°) / 2. The Town Diy (ìº”ë“¤)' },
            { label: 'Address', text: '320/5 HoÃ ng Diá»‡u (ê·¸ë© 5~10ë¶„)' }
          ]
        },
        { 
          time: '16:30', 
          title: '[íˆ¬ì–´íŒ¨ìŠ¤ 2] ë§ˆì‚¬ì§€', 
          desc: 'í•˜ì—” ìŠ¤íŒŒ or ë°”ë¹Œë¡  ìŠ¤íŒŒ', 
          icon: <Moon size={16} />, 
          mapQuery: 'Ha Nhi Spa Danang',
          details: [{ label: 'Tip', text: 'ì €ë… ë¨¹ê¸° ì „ ê°œìš´í•˜ê²Œ í”¼ë¡œ í’€ê¸°' }]
        },
        { 
          time: '18:00', 
          title: 'ì €ë…: ë†í‹°í™” (Ngon Thi Hoa)', 
          desc: 'ë¶„ìœ„ê¸° ì¢‹ì€ ì‹ë‹¹', 
          icon: <Utensils size={16} />, 
          mapQuery: 'Ngon Thi Hoa Restaurant',
          details: []
        },
        { 
          time: '20:15', 
          title: 'ë¯¸ìŠˆì•™ í¬ë£¨ì¦ˆ íƒ‘ìŠ¹', 
          desc: 'ìš©ë‹¤ë¦¬ ë¬¼/ë¶ˆì‡¼ ê´€ëŒ', 
          icon: <Anchor size={16} />, 
          mapQuery: 'Han River Cruise',
          details: [
            { label: 'Highlight', text: 'ì¼ìš”ì¼ ë°¤ 9ì‹œ ë¶ˆì‡¼ ê³¨ë“ íƒ€ì„!' },
            { label: 'Move', text: 'ë†í‹°í™”ì—ì„œ ì„ ì°©ì¥ ë„ë³´ 10ë¶„' }
          ]
        },
        { 
          time: '21:30', 
          title: 'ìˆ™ì†Œ ë³µê·€', 
          desc: 'ê·¸ë© ì´ìš©', 
          icon: <Hotel size={16} />, 
          details: [{ label: 'Tip', text: 'í˜¼ì¡í•˜ë‹ˆ í°ê¸¸ë¡œ ë‚˜ì™€ì„œ í˜¸ì¶œ' }]
        }
      ]
    },
    {
      day: 6,
      date: '01.05 (ì›”)',
      title: 'Last Fun & Good Bye âœˆï¸',
      activities: [
        { 
          time: '10:00', 
          title: 'ì²´í¬ì•„ì›ƒ & ì§ ë³´ê´€', 
          desc: 'í˜¸í…” ë¡œë¹„ì— ë³´ê´€', 
          icon: <Hotel size={16} />, 
          details: [{ label: 'Tip', text: 'ê°€ë²¼ìš´ ëª¸ìœ¼ë¡œ ë§ˆì§€ë§‰ ì¼ì • ì‹œì‘' }]
        },
        { 
          time: '10:15', 
          title: 'í•‘í¬ ì„±ë‹¹ (ë‹¤ë‚­ ëŒ€ì„±ë‹¹)', 
          desc: 'ì¸ì¦ìƒ· ëª…ì†Œ', 
          icon: <Camera size={16} />, 
          mapQuery: 'Da Nang Cathedral',
          details: [{ label: 'Move', text: 'ê·¸ë© 5~10ë¶„' }]
        },
        { 
          time: '11:00', 
          title: 'ë‹¤ë‚­ ë¯¸ìˆ ê´€', 
          desc: 'ì˜ˆìˆ  ì‘í’ˆ ê´€ëŒ', 
          icon: <Camera size={16} />, 
          mapQuery: 'Da Nang Fine Arts Museum',
          details: [{ label: 'Move', text: 'í•‘í¬ì„±ë‹¹ì—ì„œ ë„ë³´ ì´ë™ ê°€ëŠ¥' }]
        },
        { 
          time: '12:30', 
          title: 'ì ì‹¬: í”¼ìí¬í”¼ìŠ¤ (Pizza 4P\'s)', 
          desc: 'ì¸ë„ì°¨ì´ë‚˜ì  (ì˜ˆì•½ í•„ìˆ˜)', 
          icon: <Utensils size={16} />, 
          mapQuery: 'Pizza 4P\'s Indochina',
          details: [{ label: 'Menu', text: 'ë¶€ë¼íƒ€ ì¹˜ì¦ˆ í”¼ì, ê²Œì‚´ íŒŒìŠ¤íƒ€ ê°•ì¶”!' }]
        },
        { 
          time: '14:00', 
          title: 'ë¡¯ë°ë§ˆíŠ¸ ì‡¼í•‘', 
          desc: 'ê·€êµ­ ì„ ë¬¼ êµ¬ë§¤', 
          icon: <ShoppingBag size={16} />, 
          mapQuery: 'Lotte Mart Danang',
          details: [{ label: 'Note', text: 'ì§ì´ ë§ì•„ì§€ë©´ ë³´ê´€í•¨ ì´ìš©' }]
        },
        { 
          time: '16:00', 
          title: 'ë¯¸ì¼€ë¹„ì¹˜ ì¹´í˜', 
          desc: 'ë” ê°€ë“  or ì—ìŠ¤ì½” ë¹„ì¹˜ë°”', 
          icon: <Coffee size={16} />, 
          mapQuery: 'The Garden Restaurant Danang',
          details: [{ label: 'Move', text: 'ë¡¯ë°ë§ˆíŠ¸ì—ì„œ ì•½ 15ë¶„' }]
        },
        { 
          time: '17:30', 
          title: 'ì €ë…: ë‘ì‘ì— / ëƒí•­ ë² ì•ˆ', 
          desc: 'ë§ˆì§€ë§‰ í•´ì‚°ë¬¼ ë§Œì°¬', 
          icon: <Utensils size={16} />, 
          mapQuery: 'Nha Hang Lang Nghe',
          details: [{ label: 'Move', text: 'í•´ì•ˆë„ë¡œ ë”°ë¼ ì´ë™' }]
        },
        { 
          time: '18:50', 
          title: 'ë…¸ë³´í…” (ì§ ì°¾ê¸°)', 
          desc: 'ë§¡ê²¨ë‘” ì§ í”½ì—…', 
          icon: <Hotel size={16} />, 
          details: []
        },
        { 
          time: '19:15', 
          title: '[íˆ¬ì–´íŒ¨ìŠ¤ 3] ë§ˆì‚¬ì§€ & í™˜ë³µ', 
          desc: 'ë” ìŠ¤íŒŒ or ìœ ë¦¬ ìŠ¤íŒŒ', 
          icon: <Moon size={16} />, 
          mapQuery: 'The Spa Danang',
          details: [
            { label: 'Move', text: 'ì§ ì‹£ê³  ê³µí•­ ê·¼ì²˜ ìŠ¤íŒŒë¡œ ì´ë™' },
            { label: 'Update', text: 'ìƒ¤ì›Œ í›„ í¸í•œ ì˜·ìœ¼ë¡œ í™˜ë³µ' }
          ]
        },
        { 
          time: '20:45', 
          title: 'ë‹¤ë‚­ ê³µí•­ ìƒŒë”©', 
          desc: 'íˆ¬ì–´íŒ¨ìŠ¤ ì°¨ëŸ‰ ì´ìš©', 
          icon: <Car size={16} />, 
          details: [{ label: 'Time', text: 'ì¶œë°œ 2ì‹œê°„ ì „ ë„ì°© ëª©í‘œ' }]
        },
        { 
          time: '22:55', 
          title: 'ë‹¤ë‚­ ì¶œë°œ (WE202)', 
          desc: 'í•œêµ­ìœ¼ë¡œ ì¶œë°œ', 
          icon: <Plane size={16} />, 
          details: []
        },
        { 
          time: '05:30', 
          title: 'ì¸ì²œ ë„ì°© (+1ì¼)', 
          desc: 'ì—¬í–‰ ì¢…ë£Œ', 
          icon: <Plane size={16} />, 
          details: []
        }
      ]
    },
  ];

  const checklistSections = [
    {
      title: "ğŸ›« í•„ìˆ˜ ì˜ˆì•½ ë° ì„œë¥˜",
      items: [
        { id: 'ticket', text: 'í•­ê³µê¶Œ E-í‹°ì¼“ ì¶œë ¥ (íŒŒë¼íƒ€í•­ê³µ WE201/WE202 ì‹œê°„ í™•ì¸)' },
        { id: 'hotel_voucher', text: 'í˜¸í…” ë°”ìš°ì²˜ ì €ì¥ (ìœ™í¬ & ë…¸ë³´í…” ë‚ ì§œ ì¬í™•ì¸)' },
        { id: 'insurance', text: 'ì—¬í–‰ì ë³´í—˜ ê°€ì… (3ì¸ ê°€ì¡±í˜•, ì˜ë¬¸ ê°€ì…ì¦ëª…ì„œ ìº¡ì²˜)' },
        { id: 'money', text: 'í™˜ì „ & ì¹´ë“œ ì¤€ë¹„ (íŠ¸ë˜ë¸”ë¡œê·¸/ì›”ë › ì¶©ì „ + ë‹¬ëŸ¬($) ë¹„ìƒê¸ˆ)' },
        { id: 'sim', text: 'ë°ì´í„° ì¤€ë¹„ (ìœ ì‹¬/ì´ì‹¬ ë¬´ì œí•œ ì¶”ì²œ - ì•„ì´ í•¸ë“œí°ë„ í•„ìˆ˜!)' },
        { id: 'grab', text: 'Grab ì•± ì„¤ì¹˜ & ì¹´ë“œ ë“±ë¡ (í•„ìˆ˜! í•œêµ­ì—ì„œ ë¯¸ë¦¬ ë“±ë¡)' },
        { id: 'voucher', text: 'ë°”ìš°ì²˜ PDF ì €ì¥ (í´ë£©: ê³µí•­/í˜¸ì´ì•ˆ, ì•¼ë†€ì: ë°”ë‚˜í)' },
        { id: 'banahill', text: 'ë°”ë‚˜í í‹°ì¼“ êµ¬ë§¤ (ê¸°ë³¸ ì…ì¥ê¶Œ ë˜ëŠ” ëŸ°ì¹˜ ì½¤ë³´ê¶Œ)' },
      ]
    },
    {
      title: "ğŸ“© ì‚¬ì „ ì˜ˆì•½ ë° ìš”ì²­",
      items: [
        { id: 'wink_req', text: 'ìœ™í¬ í˜¸í…”: 24ì‹œê°„ ìŠ¤í…Œì´ í™•ì¸ (1/2 ì²´í¬ì•„ì›ƒ í™•ì •)' },
        { id: 'novotel_req', text: 'ë…¸ë³´í…”: ì—‘ìŠ¤íŠ¸ë¼ ë² ë“œ(ê±°ì‹¤) ì„¸íŒ… ìš”ì²­' },
        { id: 'pizza', text: '[ì‹ë‹¹] í”¼ìí¬í”¼ìŠ¤: 1/5(ì›”) ì ì‹¬ - ì¸ë„ì°¨ì´ë‚˜ì ' },
        { id: 'bana_qr', text: '[í‹°ì¼“] ë°”ë‚˜í ì…ì¥ê¶Œ: í•œêµ­ì—ì„œ ë¯¸ë¦¬ êµ¬ë§¤ (QRì½”ë“œ)' },
        { id: 'lantern', text: '[ì²´í—˜] í˜¸ì´ì•ˆ ëœí„´ ë§Œë“¤ê¸°: 1/3(í† ) 16:30 ì˜ˆì•½' },
        { id: 'oneday', text: '[ì²´í—˜] ë‹¤ë‚­ ì›ë°ì´ í´ë˜ìŠ¤: 1/4(ì¼) 14:00 ì˜ˆì•½' },
        { id: 'massage', text: '[ê°œë³„] ë§ˆì‚¬ì§€ ì˜ˆì•½: 1/2(ê¸ˆ) ì €ë… ê³¨ë“  ë¡œí„°ìŠ¤ ìŠ¤íŒŒ' },
        { id: 'cruise', text: '[ê°œë³„] í¬ë£¨ì¦ˆ ì˜ˆì•½: 1/4(ì¼) 20:15 (ìš©ë‹¤ë¦¬ ë¶ˆì‡¼)' },
        { id: 'tp1', text: '[íˆ¬ì–´íŒ¨ìŠ¤ 1] 1/3 ì•„íŠ¸/ì„¸ë ˆë„¤ ìŠ¤íŒŒ' },
        { id: 'tp2', text: '[íˆ¬ì–´íŒ¨ìŠ¤ 2] 1/4 í•˜ì—” ìŠ¤íŒŒ (16:30)' },
        { id: 'tp3', text: '[íˆ¬ì–´íŒ¨ìŠ¤ 3] 1/5 ë” ìŠ¤íŒŒ/ìœ ë¦¬ + ìƒŒë”©' },
      ]
    },
    {
      title: "ğŸ’ ì§ì‹¸ê¸°",
      items: [
        { id: 'passport', text: 'ì—¬ê¶Œ (ìœ íš¨ê¸°ê°„ 6ê°œì›” ì´ìƒ)' },
        { id: 'filter', text: 'ìƒ¤ì›Œê¸° í•„í„° (ë³¸ì²´ 1ê°œ + ë¦¬í•„ 3ê°œ)' },
        { id: 'wallet', text: 'ë™ì§€ê°‘ (ë² íŠ¸ë‚¨ í™”í ë‹¨ìœ„ í—·ê°ˆë¦¼ ë°©ì§€)' },
        { id: 'power', text: 'ë©€í‹°íƒ­ (3êµ¬ ì´ìƒ)' },
        { id: 'meds', text: 'ìƒë¹„ì•½ (ê°ê¸°ì•½, ì†Œí™”ì œ, ë°´ë“œ, ëª¨ê¸°ê¸°í”¼ì œ)' },
        { id: 'clothes', text: 'ì˜ë¥˜ (ê²½ëŸ‰ íŒ¨ë”©/ë°”ëŒë§‰ì´ - ë°”ë‚˜í ì¶”ì›€!)' },
        { id: 'swim', text: 'ìˆ˜ì˜ë³µ (ë¯¸ì¹´ì¦ˆí‚¤ ì›Œí„°íŒŒí¬ìš©)' },
        { id: 'kids', text: 'ì•„ì´ ìš©í’ˆ (í—¤ë“œì…‹, ì˜ìƒ ì €ì¥, ê°„ì‹)' },
        { id: 'tip', text: 'íŒ(Tip)ìš© í˜„ê¸ˆ (10ë§Œë™, 1~2ë§Œë™)' },
      ]
    }
  ];

  const renderOverview = () => (
    <div className="space-y-4 animate-fadeIn">
      <div className="bg-gradient-to-r from-blue-500 to-teal-400 p-6 rounded-2xl text-white shadow-lg">
        <h2 className="text-2xl font-bold mb-1">ë‹¤ë‚­ ê°€ì¡± ì—¬í–‰ ğŸ‘¨â€ğŸ‘©â€ğŸ‘§</h2>
        <p className="opacity-90 text-sm">2025.12.31 - 2026.01.05</p>
        <div className="mt-4 flex gap-2">
          <span className="bg-white/20 px-3 py-1 rounded-full text-xs">íë§ğŸŒ¿</span>
          <span className="bg-white/20 px-3 py-1 rounded-full text-xs">ë¯¸ì‹ğŸœ</span>
          <span className="bg-white/20 px-3 py-1 rounded-full text-xs">ì†Œë…€ê°ì„±ğŸ’…</span>
        </div>
      </div>

      <div className="bg-white p-4 rounded-xl shadow-sm border border-gray-100">
        <h3 className="font-bold text-gray-800 flex items-center gap-2 mb-3">
          <Plane size={18} className="text-blue-500" /> í•­ê³µí¸
        </h3>
        <div className="space-y-3">
          {flights.map((f, i) => (
            <div key={i} className="bg-gray-50 p-3 rounded-lg text-sm">
              <div className="flex justify-between font-semibold text-gray-700 mb-1">
                <span>{f.type}</span>
                <span className="text-blue-600">{f.flight}</span>
              </div>
              <div className="text-gray-600">{f.date} | {f.time}</div>
              <div className="text-xs text-gray-400 mt-1">{f.note}</div>
            </div>
          ))}
        </div>
      </div>

      <div className="bg-white p-4 rounded-xl shadow-sm border border-gray-100">
        <h3 className="font-bold text-gray-800 flex items-center gap-2 mb-3">
          <Hotel size={18} className="text-orange-500" /> ìˆ™ì†Œ
        </h3>
        <div className="space-y-3">
          {hotels.map((h, i) => (
            <div key={i} className="bg-orange-50 p-3 rounded-lg text-sm border-l-4 border-orange-400">
              <div className="flex justify-between items-start">
                <div className="font-bold text-gray-800">{h.name}</div>
                {h.mapQuery && (
                  <button 
                    onClick={() => openMap(h.mapQuery)} 
                    className="text-blue-400 hover:text-blue-600"
                  >
                    <MapPin size={16} />
                  </button>
                )}
              </div>
              <div className="text-gray-600 text-xs mt-1">{h.period}</div>
              <div className="text-orange-600 text-xs mt-1 font-medium">{h.note}</div>
            </div>
          ))}
        </div>
      </div>
    </div>
  );

  const renderSchedule = () => (
    <div className="space-y-3 animate-fadeIn pb-20">
      {scheduleData.map((day) => (
        <div key={day.day} className="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden">
          <div 
            onClick={() => toggleDay(day.day)}
            className={`p-4 flex justify-between items-center cursor-pointer transition-colors ${expandedDay === day.day ? 'bg-blue-50' : 'bg-white'}`}
          >
            <div>
              <span className="text-xs font-bold text-blue-500 bg-blue-100 px-2 py-0.5 rounded mr-2">Day {day.day}</span>
              <span className="text-gray-500 text-sm">{day.date}</span>
              <div className="font-bold text-gray-800 mt-1">{day.title}</div>
            </div>
            {expandedDay === day.day ? <ChevronUp size={20} className="text-gray-400" /> : <ChevronDown size={20} className="text-gray-400" />}
          </div>
          
          {expandedDay === day.day && (
            <div className="p-4 border-t border-gray-100 bg-gray-50">
              <div className="relative pl-4 border-l-2 border-gray-200 space-y-6">
                {day.activities.map((act, idx) => (
                  <div key={idx} className="relative group">
                    <div className="absolute -left-[21px] top-1 bg-white p-1 rounded-full border border-gray-200 text-gray-500 z-10">
                      {act.icon}
                    </div>
                    <div>
                      <div className="flex items-center gap-2">
                        <span className="text-sm font-bold text-blue-600 bg-blue-50 px-1.5 py-0.5 rounded">{act.time}</span>
                        {act.mapQuery && (
                          <button 
                            onClick={(e) => { e.stopPropagation(); openMap(act.mapQuery); }}
                            className="text-gray-400 hover:text-blue-500 flex items-center gap-1 text-xs border border-gray-200 rounded px-1.5 py-0.5 transition-colors"
                          >
                            <MapPin size={12} />
                            ì§€ë„
                          </button>
                        )}
                      </div>
                      
                      <h4 
                        className={`font-bold text-gray-800 mt-1 flex items-center gap-1 ${act.mapQuery ? 'cursor-pointer hover:text-blue-600' : ''}`}
                        onClick={() => act.mapQuery && openMap(act.mapQuery)}
                      >
                        {act.title}
                        {act.mapQuery && <ExternalLink size={12} className="opacity-30" />}
                      </h4>
                      <p className="text-sm text-gray-600 mt-0.5">{act.desc}</p>
                      
                      {/* ìƒì„¸ ì •ë³´ (Details) */}
                      {act.details && act.details.length > 0 && (
                        <div className="mt-2 space-y-1.5">
                          {act.details.map((detail, dIdx) => (
                            <div key={dIdx} className="text-xs flex items-start gap-2 bg-gray-50 p-1.5 rounded">
                              <span className={`font-bold shrink-0 ${
                                detail.label === 'Move' ? 'text-purple-600' : 
                                detail.label === 'Note' ? 'text-orange-600' :
                                detail.label === 'Menu' ? 'text-green-600' :
                                detail.label === 'Tip' ? 'text-pink-600' :
                                'text-gray-500'
                              }`}>
                                {detail.label}
                              </span>
                              <span className="text-gray-700 break-words">{detail.text}</span>
                            </div>
                          ))}
                        </div>
                      )}
                    </div>
                  </div>
                ))}
              </div>
            </div>
          )}
        </div>
      ))}
    </div>
  );

  const renderChecklist = () => (
    <div className="space-y-4 animate-fadeIn pb-20">
      {checklistSections.map((section, idx) => (
        <div key={idx} className="bg-white p-4 rounded-xl shadow-sm border border-gray-100">
          <h3 className="font-bold text-gray-800 mb-4 flex items-center gap-2">
            <CheckSquare size={18} className="text-green-500" /> {section.title}
          </h3>
          <div className="space-y-3">
            {section.items.map((item) => (
              <div 
                key={item.id} 
                onClick={() => toggleCheck(item.id)}
                className="flex items-start gap-3 p-3 rounded-lg bg-gray-50 cursor-pointer active:bg-gray-100"
              >
                <div className={`w-5 h-5 rounded border flex-shrink-0 flex items-center justify-center mt-0.5 ${checkedItems[item.id] ? 'bg-green-500 border-green-500' : 'border-gray-300 bg-white'}`}>
                  {checkedItems[item.id] && <div className="w-2 h-2 bg-white rounded-full" />}
                </div>
                <span className={`text-sm ${checkedItems[item.id] ? 'text-gray-400 line-through' : 'text-gray-700'}`}>
                  {item.text}
                </span>
              </div>
            ))}
          </div>
        </div>
      ))}
      
      <div className="bg-red-50 p-4 rounded-xl text-red-800 text-sm space-y-2">
        <h4 className="font-bold flex items-center gap-2"><MapPin size={16}/> ë¹„ìƒ ì—°ë½ì²˜</h4>
        <p>ğŸ“ ì˜ì‚¬ ì½œì„¼í„°: +82-2-3210-0404</p>
        <p>ğŸ¥ íŒ¨ë°€ë¦¬ ë©”ë””ì»¬: +84-236-3509-111</p>
      </div>
    </div>
  );

  const renderBudget = () => (
    <div className="space-y-4 animate-fadeIn">
       <div className="bg-white p-4 rounded-xl shadow-sm border border-gray-100">
        <h3 className="font-bold text-gray-800 mb-4 flex items-center gap-2">
          <Wallet size={18} className="text-purple-500" /> ì£¼ìš” ì˜ˆì‚° (3ì¸)
        </h3>
        <div className="divide-y divide-gray-100">
          <div className="py-3 flex justify-between text-sm">
            <span className="text-gray-600">ë°”ë‚˜í ì…ì¥ê¶Œ</span>
            <span className="font-bold">2,700,000 â‚«</span>
          </div>
          <div className="py-3 flex justify-between text-sm">
            <span className="text-gray-600">ë¯¸ì¹´ì¦ˆí‚¤ (ì…ì¥+ì‹ì‚¬)</span>
            <span className="font-bold">2,000,000 â‚«</span>
          </div>
          <div className="py-3 flex justify-between text-sm">
            <span className="text-gray-600">ë°œë§ˆì‚¬ì§€ 3ì¸ (íŒí¬í•¨)</span>
            <span className="font-bold">1,200,000 â‚«</span>
          </div>
           <div className="py-3 flex justify-between text-sm">
            <span className="text-gray-600">ì›ë°ì´ í´ë˜ìŠ¤</span>
            <span className="font-bold">1,000,000 â‚«</span>
          </div>
        </div>
        <div className="mt-4 p-3 bg-purple-50 text-purple-700 text-xs rounded-lg">
          ğŸ’¡ í™˜ìœ¨: 10,000 VND â‰ˆ 540 KRW
        </div>
      </div>
    </div>
  );

  return (
    <div className="w-full max-w-md mx-auto h-screen bg-gray-50 flex flex-col font-sans">
      {/* Top Bar */}
      <div className="bg-white px-4 py-3 shadow-sm z-10 sticky top-0">
        <h1 className="text-lg font-bold text-center text-gray-800">ë‹¤ë‚­ ì—¬í–‰ 2026 ğŸ‡»ğŸ‡³</h1>
      </div>

      {/* Main Content Area */}
      <div className="flex-1 overflow-y-auto p-4 pb-24">
        {activeTab === 'overview' && renderOverview()}
        {activeTab === 'schedule' && renderSchedule()}
        {activeTab === 'checklist' && renderChecklist()}
        {activeTab === 'budget' && renderBudget()}
      </div>

      {/* Bottom Navigation */}
      <div className="bg-white border-t border-gray-200 fixed bottom-0 w-full max-w-md flex justify-around py-3 px-2 z-20 pb-safe">
        <button 
          onClick={() => setActiveTab('overview')}
          className={`flex flex-col items-center gap-1 ${activeTab === 'overview' ? 'text-blue-600' : 'text-gray-400'}`}
        >
          <Hotel size={24} strokeWidth={activeTab === 'overview' ? 2.5 : 2} />
          <span className="text-[10px] font-medium">ê°œìš”</span>
        </button>
        <button 
          onClick={() => setActiveTab('schedule')}
          className={`flex flex-col items-center gap-1 ${activeTab === 'schedule' ? 'text-blue-600' : 'text-gray-400'}`}
        >
          <Calendar size={24} strokeWidth={activeTab === 'schedule' ? 2.5 : 2} />
          <span className="text-[10px] font-medium">ì¼ì •</span>
        </button>
        <button 
          onClick={() => setActiveTab('checklist')}
          className={`flex flex-col items-center gap-1 ${activeTab === 'checklist' ? 'text-blue-600' : 'text-gray-400'}`}
        >
          <CheckSquare size={24} strokeWidth={activeTab === 'checklist' ? 2.5 : 2} />
          <span className="text-[10px] font-medium">ì²´í¬</span>
        </button>
        <button 
          onClick={() => setActiveTab('budget')}
          className={`flex flex-col items-center gap-1 ${activeTab === 'budget' ? 'text-blue-600' : 'text-gray-400'}`}
        >
          <Wallet size={24} strokeWidth={activeTab === 'budget' ? 2.5 : 2} />
          <span className="text-[10px] font-medium">ì˜ˆì‚°</span>
        </button>
      </div>
    </div>
  );
};

export default DanangTripDashboard;
